<!DOCTYPE html>
<html>
    <head>
            <script>
                    var jsonDataObj, htmltable="";
                    var xmlhttp = new XMLHttpRequest();
                    xmlhttp.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            jsonDataObj = JSON.parse(this.responseText);
                            //document.getElementById("test").innerHTML = jsonDataObj.movie[0].genre[1];
                            writetable(jsonDataObj,htmltable);
                            }
                        };
                    xmlhttp.open("GET", "movies.json");
                    xmlhttp.send();
                    
                    function writetable (jsonDataObj, htmltable){
                        htmltable = "<table>";
                        htmltable += "<tr><th>ID</th><th>Movie Title</th><th>Release Year</th><th>Genre Type(s)</th></tr>";
                        for (movie in jsonDataObj.movie){
                            htmltable += "<tr><td>" + jsonDataObj.movie[movie].id + "</td><td>" + jsonDataObj.movie[movie].title + "</td><td>" + jsonDataObj.movie[movie].year + "</td><td>";
                            for (genretype in jsonDataObj.movie[movie].genre) {
                                htmltable += jsonDataObj.movie[movie].genre[genretype] + ", ";
                            };
                            htmltable = htmltable.slice(0, -2);
                            htmltable += "</td></tr>";
                        };
                        htmltable += "</table>";

                        document.getElementById("test").innerHTML = htmltable;
                    }
                </script>
                <style>
                    table {
                        border-collapse: collapse;
                    }
                    td, th {
                        border: 1px solid black;
                        padding: 8px;
                    }
                </style>
    </head>
<body>

<h1>Topic 3 - JSON Parse and Stringify</h1>
<pre><xmp>
    <script>
        var jsonDataObj, htmltable="";
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                jsonDataObj = JSON.parse(this.responseText);
                //document.getElementById("test").innerHTML = jsonDataObj.movie[0].genre[1];
                writetable(jsonDataObj,htmltable);
                }
            };
        xmlhttp.open("GET", "movies.json");
        xmlhttp.send();
        
        function writetable (jsonDataObj, htmltable){
            htmltable = "<table>";
            htmltable += "<tr><th>ID</th><th>Movie Title</th><th>Release Year</th><th>Genre Type(s)</th></tr>";
            for (movie in jsonDataObj.movie){
                htmltable += "<tr><td>" + jsonDataObj.movie[movie].id + "</td><td>" + jsonDataObj.movie[movie].title + "</td><td>" + jsonDataObj.movie[movie].year + "</td><td>";
                for (genretype in jsonDataObj.movie[movie].genre) {
                    htmltable += jsonDataObj.movie[movie].genre[genretype] + ", ";
                };
                htmltable = htmltable.slice(0, -2);
                htmltable += "</td></tr>";
            };
            htmltable += "</table>";

            document.getElementById("test").innerHTML = htmltable;
        }
    </script></xmp></pre>
<p id="test"></p>
</body>
</html>